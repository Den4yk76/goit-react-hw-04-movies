(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{66:function(e,t,c){"use strict";function r(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function n(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function o(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?n(Object(c),!0).forEach((function(t){r(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}c.r(t),c.d(t,"default",(function(){return p}));var a=c(31),i=c(2),s=c(8),u=c(0),l=c(30),b=c.n(l),h=c(1);function p(){var e=Object(u.useState)(""),t=Object(a.a)(e,2),c=t[0],r=t[1],n=Object(u.useState)([]),l=Object(a.a)(n,2),p=l[0],f=l[1],j=Object(u.useState)(""),O=Object(a.a)(j,2),m=O[0],g=O[1],y=Object(i.f)(),v=Object(i.g)(),d="https://api.themoviedb.org/3/search/movie",w="?api_key=c65fb4b4036e2137b5346647b44aa2c0",S="&query=".concat(c),P=d+w+S,x=new URLSearchParams(v.search).get("query");Object(u.useEffect)((function(){if(c||x)if(!m&&x){var e="&query=".concat(x),t=d+w+e;b.a.get(t).then((function(e){return f(e.data.results)})).then(y.push(o(o({},v),{},{search:"query=".concat(x)})))}else b.a.get(P).then((function(e){return f(e.data.results)})).then(y.push(o(o({},v),{},{search:"query=".concat(c)})))}),[c]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),console.log("location",v),console.log("history",y),console.log("history.location.pathname + history.location.search: ",y.location.pathname+y.location.search),r(m)},children:[Object(h.jsx)("input",{onChange:function(e){g(e.target.value)},name:"searh",value:m,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies"}),Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:"Search"})]}),p.length>0&&Object(h.jsx)("ul",{children:p.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:{pathname:"/movies/".concat(e.id),state:{from:"".concat(y.location.pathname)+"".concat(y.location.search),label:"Back to movies from moviePage"}},children:e.title})},e.id)}))})]})}}}]);
//# sourceMappingURL=MoviesPage.8f14fafb.chunk.js.map